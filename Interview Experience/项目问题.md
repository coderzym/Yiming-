# 自我介绍

面试官你好，我叫赵怡铭。目前已经从事了两年的web前端工作，上一份工作是在一家给其他企业做解决方案的公司，但我在里面主要还是参与了公司内部的产品，也就是我简历中的两个项目，这个产品本身是为了提高公司的作业效率，它的产生一方面满足了业务的差异，比如能让我们的运营人员或者产品自己就能做动态配置。另一方面也在一定程度上提高了我们开发的效率，一些重复的表单或者表格直接通过配置就能出来。另外在工作之余，我也喜欢写博客，GitHub上也有自己的开源项目

# 动态表单能说的具体点吗？

动态表单由JSON树和前端渲染两部分组成，我先说明一下我们渲染出来的表单是一个什么样子：

动态表单其实是一个工单系统，它分为三部分组成：业务类型 => 业务线分组 => 具体的表单信息(元数据)，如部门分类、问题分类、工单号、提交人信息、标题及问题描述等信息，这些表单也不是简单的排列在页面上，它们有一套排列规则，比如每行排列几个，按怎样的布局显示。

前端渲染是依赖于二次封装组件库，我会定义一些类似于input、select、date、button自定义的基本组件。这些组件的props属性接收的是一个对象，它描述了组件具体的信息，比如input内具体的值、placeholder、最大长度、是否可编辑这些属性。另外这些组件都有统一的命名规则，以大写字母`C`开头，如`CInput`。然后我会在库中暴露出一个父级组件，它里面是用了Vue内置的component标签配合它的is属性来做组件类型的区别。也就是说只要传入不同的组件配置进去就能在页面上渲染出对应的组件。例如我传入的`is`属性是`CInput`，那么渲染出的就是`CInput`这个组件

# JSON树有哪些属性

1.当前这个表单的ID

2.有一个定义整个表单结构的属性叫做bizNode，比如表单上有几个tab项，每个tab项下面又会有哪些元数据，比如姓名这个元数据，它其中就定义了一些属性，像 title，具体的值张三还是李四，还有控件类型，是一个input输入框还是select下拉框，以及是否可编辑，字符长度的限制，placeholder等等属性

3.还会有一个叫做 metadataProperties 的属性，它其实是一个个的Map映射，由key-value的形式组成，key表示的是元数据也就是metadata的唯一标示，value是元数据对应的具体属性，就像刚刚提到的类型、具体的值、是否可编辑等

# 动态表单具体的难点在哪？

一、不同类型组件的设计

    1.组件接收的Props、数据格式，因为不同类型的组件接收的数据格式和属性也是不同的，比如日期组件它就会比其他的组件多一个format日期格式的字段，数字组件会多一个精度的属性
    2.每个组件还会有emit给父级组件的数据格式
    3.是否有slot

二、基础组件组合成复杂组件

    基于基础组件又创建了一个动态出来的抽屉，它的应用航警一般是在表格中点击编辑的时候，右侧出现这个抽屉，然后修改表格中的数据

# 动态表单是在哪里配置的

起码系统中有一个表单管理的页面，一个是表单编辑，一个是显示控制

    1.通过不断的配置，然后在JSON树上不断的叠加节点，JSON树有三种节点类型，第一种是整个表单的根节点，第二种是业务相关的Tab项，第三种是具体的元数据

    2.显示控制。它主要是控制一个动态表单在不同阶段的一个显现规则，例如一个员工想要提交工单，在他填写工单的时候，会先生成一个表单。这个表单它会经过提交，审批，再到最后的完结这一系列的阶段，在每个阶段所呈现的表单内容是不同的。例如在第一阶段提交人的姓名是可以编辑的，但是第二阶段又不可编辑了。因此还会有一个viewCode，也就是当前到了哪个阶段来贯穿表单的整个生命周期。

# 你们的UI组件库怎么实现按需引入的呢？

可以写一个方法，判断传入进来的数据中用到了哪些类型的基础组件，只对用到的基础组件进行一个引入。

# 你自己的项目里有做过哪些优化

1.先使用`webpack-bundle-analyzer`分析打包后整个项目中的体积结构，既可以看到项目中用到的所有第三方包，又能看到各个模块在整个项目中的占比。

2.`Vue`路由懒加载，使用`() => import(xxx.vue)`形式，打包会根据路由自动拆分打包。

3.第三方库按需加载，例如`lodash`库、`UI`组件库

4.`babel-loader`编译慢，可以通过配置`exclude`来去除一些不需要编译的文件夹，还可以通过设置`cacheDirectory`开启缓存，转译的结果会被缓存到文件系统中

5.文件解析优化：通过配置`resolve`选项中的`alias`。`alias`创建`import`或者`require`的别名，加快`webpack`查找速度。

# 有用过哪些插件做项目的分析吗

1.speed-measure-webpack-plugin`：简称 SMP，分析出 Webpack 打包过程中 Loader 和 Plugin 的耗时，有助于找到构建过程中的性能瓶颈。

2.webpack-bundle-analyzer`：分析打包后整个项目中的体积结构，既可以看到项目中用到的所有第三方包，又能看到各个模块在整个项目中的占比，需要配置optimization: { concatenate: false }

# 如果有一个组件需要和前面的组件关联你会怎么做

1.与后台配合，如果后一个子组件和前面一个相关联的话，在选择了前一个组件之后发送请求给后台，后台返回你需要改动的子组件的信息，然后前端再进行更新

2.每种子组件都会有一个回调事件，可以在业务代码中判断是哪个子组件发起的事件，然后根据这个来判断。

# 动态表格的实现

1.上面的搜索条件因为和动态表单很像，又有输入框，又有下拉框，所以上面的索引我也是基于动态表单UI组件库进行开发的

2.下面具体的表格查询的内容，这个是基于Ant Design of Vue中的Table进行封装的，它的结构其实很简单，只要传入需要的表头字段列表，也就是`columns`，还有具体的数据进去就能显示出表格。不过这里因为表头字段的数量不确定，所以可能需要用到Vue的计算属性来进行一个计算，例如如果表头字段的数量是小于8的话则表格的`x`方向不需要滚动，否则整个`x`方向的长度就为`数量 X 105px`类似这样的值。以及还有涉及到是否分页，每个字段的排序呀等操作。

# 你们项目一般是如何做缓存的

1.对于一些没有指纹信息的资源，例如`index.html`可以使用`Cache-Control: no-cache`开启协商缓存

2.对于带有指纹信息的资源，一般会使用splitChunksPlugin进行代码分割，来保证造成最小范围的缓存失效，再设置`Cache-Control: max-age=3153600`

3.不需要缓存的资源设置`Cache-Control: no-store`，即不强缓存也不进行协商缓存

# 说下你们项目的亮点

1.动态表单表格，它核心的价值在于解决了不同业务产生的差异化和个性化，让我们的作业效率有了很大的提升，这一点不仅仅是对于使用者，也同样提高了我们开发人员的效率。使得一份表单在不同的阶段，也就是生命周期能够呈现不同的内容。

2.另一点就是工作流，因为一个工单它是如何审批，由谁审批，这些流程是如何走下去的，这点在起码系统中都能来进行一个配置。

# 假设有两个子项目，他们需要共用同一个用户体系如何保证关掉页面之后打开另一个项目用户还是登录状态？

Cookie跨站点访问就可以解决。把用户每次登录获取到的`Token`存储在`Cookie`中，因为`Cookie`是可以同站传输的。

# 首屏加载优化

(白屏时间是指浏览器从响应用户输入网址地址，到浏览器开始显示内容的时间。首屏时间是指浏览器从响应用户输入网址地址，到首屏内容渲染完成的时间，此时整个网页不一定要全部渲染完成，但在当前视窗的内容需要。白屏时间是首屏时间的一个子集。)

1.HTTP缓存方案：强缓存+hash文件
2.前端做好缓存方案，例如存储在内存(即保存变量)，另一个存储在LocalStorage
3.前端的动态资源加载：路由动态加载、组件动态加载
4.利用好`async`和`defer`两个属性
5.使用SSR渲染
6.利用好HTTP压缩，比如指定`Content-Encoding`首部字段为`gzip`

# 你在项目中提了哪些意见？

1.我们项目中在订单页面会有一个审批记录的列表，这个审批记录的列表是紧靠在页面的右侧可进行收缩折叠的。而这个东西最开始里面显示的内容会很多，比如每个阶段审批的人，时间，备注，同意还是拒绝等等信息。而我当时想的是，站在用户的角度来说，他看到这个记录的时候最关心的应该是审批的人，以及审批时间还有到了哪个阶段，而一些无关紧要的信息没必要开始就带出来。所以我当时就有一个提议：每条记录只显示出用户最关心的东西，而不重要的可以等用户鼠标移动上去的时候在进行一个显示

2.因为考虑到用户可能会频繁的切换某些页面，而项目中的页面菜单的层级有时候可能会比较深，不方便来回切换。我就有提议在当前页面的顶部实现一个导航栏，每当进入一个新的页面的时候，导航栏就会新增一个标签，记录当前页面，这样相当于留了一个快捷的入口给用户，方便他们进行页面的切换，同时导航栏也会有例如删除左侧的全部标签，删除右侧，只保留当前页等功能。

# BIM指挥大屏

因为智慧城市的兴起，公司的工程项目增加，所以做了一个BIM指挥大屏，也就是方便我们查看工程检查结果、安全隐患数据、隐患类型等